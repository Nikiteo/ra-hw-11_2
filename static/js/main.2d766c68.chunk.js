(this["webpackJsonpra-hw-11_2"]=this["webpackJsonpra-hw-11_2"]||[]).push([[0],{41:function(t,e,n){},42:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(16),a=n(4),s=(n(41),n(42),n(67)),i=n(6),o=n.n(i),u=n(12),l="POST/FETCH_SUCCESS",b="POST/FETCH_DELETE",j="EDIT/EDIT_FETCH_SUCCESS",p="EDIT_FETCH_SAVE",d="EDIT_FETCH_CHANGE",O="APP/SHOW_LOADER",f="APP/HIDE_LOADER",h="APP/SHOW_ALERT",m="APP/HIDE_ALERT",v=n(15),x=n.n(v),y=n(9),g=Object(y.a)(),E="http://localhost:7070/api/services";function N(){return{type:O}}function w(){return{type:f}}var C=function(t){return function(e){e({type:h,payload:t}),setTimeout((function(){e({type:m})}),5e3)}};var P=function(){return function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(N()),t.next=3,x.a.get("".concat(E)).then((function(t){return e((n=t.data,{type:l,payload:n}));var n})).then((function(){return e(w())})).catch((function(t){return e(C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 ".concat(t)))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=n(1);function _(t){var e=t.post,n=Object(a.b)(),c=Object(s.e)();return Object(T.jsx)("div",{className:"card",children:Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsxs)("p",{className:"card-text",children:[e.name,": ",e.price]}),Object(T.jsxs)("div",{className:"btn-group",role:"group",children:[Object(T.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return c.push("/services/".concat(e.id))},children:"Edit"}),Object(T.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return n((t=e.id,function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(N()),e.next=3,x.a.delete("".concat(E,"/").concat(t)).then((function(){return n(P())})).then((function(){return n(w())})).catch((function(t){return n(C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 ".concat(t)))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t},children:"Delete"})]})]})})}function S(){return Object(T.jsx)("div",{className:"spinner-border text-danger",role:"status",children:Object(T.jsx)("span",{className:"sr-only",children:"Loading..."})})}function D(t){var e=t.text,n=t.vision;return Object(T.jsx)("div",{className:"alert alert-".concat(n),role:"alert",children:e})}function k(){var t=Object(a.b)(),e=Object(a.c)((function(t){return t.posts.posts})),n=Object(a.c)((function(t){return t.app.loading})),r=Object(a.c)((function(t){return t.app.alert}));return Object(c.useEffect)((function(){t(P())}),[t]),r?Object(T.jsx)(D,{text:r,vision:"danger"}):n?Object(T.jsx)(S,{}):e.length?e&&e.map((function(t){return Object(T.jsx)(_,{post:t},t.id)})):Object(T.jsx)(D,{text:"\u041d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0443\u0441\u043b\u0443\u0433\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c",vision:"warning"})}function A(t){var e=t.match,n=Object(a.b)(),r=Object(a.c)((function(t){return t.editPosts.editPosts})),i=Object(a.c)((function(t){return t.app.loading})),l=Object(a.c)((function(t){return t.app.alert})),b=Object(s.e)();Object(c.useEffect)((function(){var t;n((t=e.params.id,function(){var e=Object(u.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(N()),e.next=3,x.a.get("".concat(E,"/").concat(t)).then((function(t){return n((e=t.data,{type:j,payload:e}));var e})).then((function(){return n(w())})).catch((function(t){return n(C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 ".concat(t)))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[n,e.params.id]);var O=function(t){t.preventDefault();var e=t.target,c=e.name,r=e.value;n(function(t,e){return function(){var n=Object(u.a)(o.a.mark((function n(c){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:d,payload:{name:t,value:e}});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(c,r))};return l?Object(T.jsx)(D,{text:l,vision:"danger"}):i?Object(T.jsx)(S,{}):Object(T.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c,r,a,s,i=t.target;n((c=e.params.id,r=i.name.value,a=i.price.value,s=i.content.value,function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(N()),t.next=3,x.a.post("".concat(E),{id:Number(c),name:r,price:a,content:s}).then((function(){return e({type:p})})).then((function(){return e(w())})).then((function(){return g.push("/services")})).catch((function(t){return e(C("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 ".concat(t)))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:[Object(T.jsxs)("div",{className:"mb-3",children:[Object(T.jsx)("label",{htmlFor:"title",className:"form-label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(T.jsx)("input",{type:"text",className:"form-control",id:"title",name:"name",value:r.name,onChange:O})]}),Object(T.jsxs)("div",{className:"mb-3",children:[Object(T.jsx)("label",{htmlFor:"price",className:"form-label",children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(T.jsx)("input",{type:"number",className:"form-control",id:"price",name:"price",value:r.price,onChange:O})]}),Object(T.jsxs)("div",{className:"mb-3",children:[Object(T.jsx)("label",{className:"form-label",htmlFor:"describe",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(T.jsx)("input",{type:"text",className:"form-control",id:"describe",name:"content",value:r.content,onChange:O})]}),Object(T.jsxs)("div",{className:"btn-group",role:"group",children:[Object(T.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"}),Object(T.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return b.goBack()},children:"Cancel"})]})]})}function H(){return Object(T.jsxs)("div",{className:"container pt-3",children:[Object(T.jsx)("h1",{className:"pb-3",children:"\u041d\u0430\u0448\u0438 \u0443\u0441\u043b\u0443\u0433\u0438"}),Object(T.jsx)(s.c,{history:g,children:Object(T.jsxs)(s.d,{children:[Object(T.jsx)(s.b,{exact:!0,path:"/",children:Object(T.jsx)(s.a,{to:"/services"})}),Object(T.jsx)(s.b,{exact:!0,path:"/ra-hw-11_2",children:Object(T.jsx)(s.a,{to:"/services"})}),Object(T.jsx)(s.b,{path:"/services",exact:!0,component:k}),Object(T.jsx)(s.b,{path:"/services/:id",component:A})]})})]})}var F=n(11),I=n(33),L=n(3),R={loading:!1,alert:null},B=n(18),J={editPosts:{name:"",price:"",content:""}},U={posts:[]},W=Object(F.b)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(L.a)(Object(L.a)({},t),{},{posts:e.payload});case b:var n=e.payload.id;return Object(L.a)(Object(L.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==n}))});default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return Object(L.a)(Object(L.a)({},t),{},{loading:!0});case f:return Object(L.a)(Object(L.a)({},t),{},{loading:!1});case h:return Object(L.a)(Object(L.a)({},t),{},{alert:e.payload});case m:return Object(L.a)(Object(L.a)({},t),{},{alert:null});default:return t}},editPosts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(L.a)(Object(L.a)({},t),{},{editPosts:e.payload});case d:var n=e.payload,c=n.name,r=n.value,a=t.editPosts;return Object(L.a)(Object(L.a)({},t),{},{editPosts:Object(L.a)(Object(L.a)({},a),{},Object(B.a)({},c,r))});case p:return Object(L.a)({},J);default:return t}}}),G=Object(F.d)(W,Object(F.c)(Object(F.a)(I.a)));Object(r.render)(Object(T.jsx)(a.a,{store:G,children:Object(T.jsx)(H,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.2d766c68.chunk.js.map